---
layout: post
title: SPRING MVC02 - 1
categories: example
tags: [plantuml]
---


지금까지는 MemberDAO와 MemberMapper.xml을 연동해서 db와 연결해왔어

이제 스프링에서는 DAO를 없애고 매핑시키는 방법이 있어

1. DAO를 없애고 인터페이스를 생성해서 (MapperInterface)

각 메서드들의 메서드명과 Mapper.xml의 id와 연결해서 sql을 실행시킬거야

2. 아예 Mapper.xml도 사용하지 않고, @Insert("SQL문") 이런 방법도 있어

1번 방법을 이용해보자

src/main/java에 kr.bit.mapper 패키지 생성

->MemberMapper 인터페이스 생성 (DAO의 메서드를 추상메서드로 정의만 해두자)

```1=java
    //각 메서드명과 Mapper.xml의 id 이름이 매핑이 되는데 이것을 가능하게 하려면 
    @Mapper //알아서 SqlSessionFactory 와 SqlSession 실행 
    public interface MemberMapper {
    //인터페이스의 이름과 Mapper.xml파일의 namespace의 경로가 같아야 찾아갈 수 있다.
	
	public List<MemberVO> memberList(); //sql - id="memberList"
	public int memberInsert(MemberVO vo);//sql - id="memberInsert"
	public int memberDelete(int num);//sql - id="memberDelete"
	public MemberVO memberContent(int num);//sql - id="memberContent"
	public int memberUpdate(MemberVO vo);//sql - id="memberUpdate"
}
```
또, root-context.xml에서 스캔을 할 수 있게 해줘야지

`<mybatis-spring:scan base-package="kr.bit.mapper"/>`

그 다음에, mapper.xml과 mapper인터페이스를 한 패키지에 담아줘

그리고 MemberMapper.xml의 namespace도 kr.bit.mapper로 수정.

이제 경로가 같아졌으니 root-context.xml에서 property memberlocations 지워도 돼

DAO를 지워서 이제 dao는 못쓰고 인터페이스를 사용해야 돼 

2번 방법은 아예 MemberMapper.xml파일을 없애고 

인터페이스의 각 메서드 위에 어노테이션을 사용해서 바로 쿼리문을 써주는 거야













