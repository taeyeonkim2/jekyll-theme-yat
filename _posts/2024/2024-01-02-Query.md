---
layout: post
title: 쿼리 공부 - 즐겨찾기가 가장 많은 식당 정보 출력하기
categories: 공부중
tags: [taeyeon]
---

## 즐겨찾기가 가장 많은 식당 정보 출력하기

문제

```
REST_INFO 테이블에서 음식종류별로 즐겨찾기수가 가장 많은 식당의 음식 종류, ID, 식당 이름, 즐겨찾기수를 조회하는 SQL문을 작성해주세요. 

이때 결과는 음식 종류를 기준으로 내림차순 정렬해주세요.
```

내 생각의 흐름

1. 음식종류별? GROUP BY FOOD_TYPE 해보자

2. 음식종류를 기준으로 내림차순? ORDER BY FOOD_TYPE

크게 이렇게 묶어두고, 음식종류별로 즐겨찾기수가 가장 많은 "식당"?
 
그럼 FOOD_TYPE으로 그룹핑한 후, MAX(FAVORITES)를 HAVING 절에 넣으면 되려나??

안되네..

```1=FALSE
SELECT FOOD_TYPE, MAX(FAVORITES)
FROM REST_INFO
GROUP BY FOOD_TYPE
```

이렇게 하면, 각 음식종류별 가장 많은 즐겨찾기수는 나와.

근데, REST_ID랑 REST_NAME도 나와야하잖아

```2=FALSE
SELECT FOOD_TYPE, REST_ID, MAX(FAVORITES)
FROM REST_INFO
GROUP BY FOOD_TYPE,REST_ID
```

이러면 FOOD_TYPE과 REST_ID가 KEY가 되니까 모든 값이 다 나와버리지? 즉 이것도 아니야

조인 해서 맞추긴했는데 찝찝하네..

```
SELECT A.FOOD_TYPE,A.REST_ID,A.REST_NAME,A.FAVORITES
FROM REST_INFO A JOIN (SELECT FOOD_TYPE,MAX(FAVORITES) AS FAVORITES
FROM REST_INFO 
GROUP BY FOOD_TYPE) B ON A.FOOD_TYPE = B.FOOD_TYPE AND A.FAVORITES = B.FAVORITES
ORDER BY FOOD_TYPE DESC
```

뭔가 껄끄러워 다른 사람이 올린것좀 찾아보자 


