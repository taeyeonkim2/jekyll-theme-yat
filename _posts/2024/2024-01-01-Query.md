---
layout: post
title: 쿼리 공부
categories: 공부중
tags: [taeyeon]
---

2월부터 프로젝트가 많아서 슬슬 쿼리공부도 해야된다

지금은 단순한 CRUD밖에 못한다..

우선 문법을 보면서 이런 기능도 있구나 정도만 파악하자

SELECT의 작동 순서

FROM and JOIN -> WHERE -> GROUP BY -> HAVING -> SELECT -> ORDER BY -> LIMIT


## Stored Function

- 사용자가 정의한 함수

- DBMS에 저장되고 사용되는 함수

예제 1. 임직원의 ID를 열자리 정수로 랜덤하게 발급하고 싶다 (맨 앞자리는 1로 고정)

```
CREATE FUNCTION id_generator()
RETURNS int
BEGIN
    RETURN (1000000000+floor(rand()*1000000000));
END
```

1. 함수의 이름과 파라미터, 리턴타입을 지정한다.

2. BEGIN ~ END 사이에 실행될 문장을 적어준다.

예제 2. 부서의 ID를 파라미터로 받으며 해당 부서의 평균 연봉을 알려주는 함수를 작성

```
CREATE FUNCTION dept_avg_salary(d_id int)
RETURNS int
BEGIN
    DECLARE avg_sal int;
    select avg(salary) into avg_sal from employee where dept_id=d_id;
    RETURN avg_sal;
END









