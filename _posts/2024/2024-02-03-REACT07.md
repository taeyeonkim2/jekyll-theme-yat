---
layout: post
title: 리액트 넷
categories: 공부중
tags: [taeyeon]
---


## 리스트와 키

프로젝트할때 warning뜨면 그냥 index넣고 땡이었는데 얼마나 중요할까.?

가상돔이 하는 역할과 관련이 깊다

가상돔은 차이가 있는 부분만을 계산해서 실제 돔에 반영하면서 렌더링 성능을 올린다

반복문을 다 비교하면 너무 오래걸리니까

두 가지 가정하게 재조정 알고리즘을 사용한다

첫번째, 엘리먼트 타입이 다를 경우

두번째, Key값이 다를 경우

인덱스는 최후의 수단으로 남겨두라네ㅠ

```1=main.js
import store from './js/store.js'

class App extends React.Component {
  constructor() {
    super();

    this.state = {
      searchKeyword: "",
      searchResult:[],
      submitted :false,//검색을안했는데도 결과가 없다고 뜨네?
    };
  }

  handleSubmit(event) {
    event.preventDefault();
    console.log("TODO: handleSubmit", this.state.searchKeyword);
    this.search(this.state.searchKeyword) //1.입력이 발생했을 때 검색을하고
  }
  search(searchKeyword){//2.검색한 결과를 담아야지
    //3. 그런데 컴포넌트는 검색을 할 수가 없어. store.js에서 검색을 시키자
    // store.js에서 Store클래스의 객체를 만들고 export해주면돼
    const searchResult=store.search(searchKeyword)
    this.setState({
      searchResult, //집어넣을 값을 담은 변수명이랑 state의 이름이 같아서 생략한거야
      submitted: true
    })
    //4. 이제 store의 search함수 구현하자

  }
  handleReset() {
    console.log("TODO: handleResset");
    this.setState({ searchKeyword: "" });
  }

  handleChangeInput(event) {
    const searchKeyword = event.target.value;
    this.setState({ searchKeyword });
  }

  render() {
    return (
      <>
        <header>
          <h2 className="container">검색</h2>
        </header>
        <div className="container">
          <form
            onSubmit={(event) => this.handleSubmit(event)}
            onReset={() => this.handleReset()}
          >
            <input
              type="text"
              placeholder="검색어를 입력하세요"
              autoFocus
              value={this.state.searchKeyword}
              onChange={(event) => this.handleChangeInput(event)}
            />
            {this.state.searchKeyword.length > 0 && (
              <button type="reset" className="btn-reset"></button>
            )}
          </form>
          <div className="content">
            {this.state.submitted && (this.state.searchResult.length > 0
              ? (<ul className="result">
                {this.state.searchResult.map(item => {
                  return (
                    <li key={item.id}>
                      <img src={item.imageUrl} alt={item.name} />
                      <p>{item.name}</p>
                    </li>
                  )
                })}</ul>)
              : (<div className="empty-box">검색결과가 없습니다</div>))}
          </div>
        </div>
      </>
    );
  }
}

ReactDOM.render(<App />, document.querySelector("#app"));

```

위에 보면 JSX를 쓰긴했는데 너무 길어서 가독성이 떨어진다..

그래서 좀 수정해주려고

```2=main.js

render() {
    const searchForm =(
      <form
            onSubmit={(event) => this.handleSubmit(event)}
            onReset={() => this.handleReset()}
          >
            <input
              type="text"
              placeholder="검색어를 입력하세요"
              autoFocus
              value={this.state.searchKeyword}
              onChange={(event) => this.handleChangeInput(event)}
            />
            {this.state.searchKeyword.length > 0 && (
              <button type="reset" className="btn-reset"></button>
            )}
          </form>
    )
    const searchResult =(
      (this.state.searchResult.length > 0
        ? (<ul className="result">
          {this.state.searchResult.map(item => {
            return (
              <li key={item.id}>
                <img src={item.imageUrl} alt={item.name} />
                <p>{item.name}</p>
              </li>
            )
          })}</ul>)
        : (<div className="empty-box">검색결과가 없습니다</div>))
    )
    return (
      <>
        <header>
          <h2 className="container">검색</h2>
        </header>
        <div className="container">
            {searchForm}
          <div className="content">
            {this.state.submitted && searchResult}
          </div>
        </div>
      </>
    );
  }

```
