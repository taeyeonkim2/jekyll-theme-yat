---
layout: post
title: SPRING 09
categories: SPRING2
tags: [taeyeon]
---

## 정리 (답글 & 페이징 처리)

<h3>답글</h3>

기존 게시물 BoardVO에는 boardGroup, boardSequence, boardLevel, boardAvailable 컬럼이 있었어.

1. boardGroup : 원글과 원글에 대한 모든 댓글, 대댓글을 하나로 그룹화 시켜주는 컬럼

- 원글과 동일한 boardGroup값을 가져야 하니까, 답글 버튼을 누르면 원글의 idx의 값을 넘겨받고,

- db에서 idx에 해당하는 boardGroup을 답글 vo에 저장.

2. boardSequence : 최신 댓글을 맨 위로 올라오게 해주는 컬럼

- 원글의 boardSequence는 0이고, 첫 댓글은 원글의 boardSequence+1 = 1을 넣어주자

3. boardLevel : 원글은 들여쓰기x, 댓글은 들여쓰기 1칸, 대댓글은 들여쓰기 2칸

- 원글은 들여쓰기가 없으니까 0 이고, 그에 대한 댓글은 boardLevel+1 =1을 넣어줄 거야

4. boardAvailable : 삭제가 되면 0으로 바꾸고 해당 게시물에 접근할 수 없고 알럿을 띄우기 위한 컬럼

5. 이제, boardSequence와 boardLevel이 유효한지 체크하고, 이전 댓글들의 컬럼을 수정해줄 거야

6. boardSequence

```
![image](https://github.com/taeyeonkim2/taeyeonkim2.github.io/assets/121271236/8109134b-8f14-48a6-8d84-3c3695fddd55)

![image](https://github.com/taeyeonkim2/taeyeonkim2.github.io/assets/121271236/31f8e242-1482-4d66-92a6-688e5817275d)

```

- 이 상황에서 A_r1과 A_r2가 똑같으면 안되잖아..그리고 최신 댓글은 맨 위로 올려줘야하니까(boardSequence 오름차순 정렬)

- 그러면 A_r1의 boardSequence에 +1을 해주면 돼. 이런식으로 boardSequence는 업데이트 해주면 돼!

- 이제 대댓글을 생각해보자!

```
![image](https://github.com/taeyeonkim2/taeyeonkim2.github.io/assets/121271236/3359b1db-516f-4c3f-a456-143b195ddd6f)

![image](https://github.com/taeyeonkim2/taeyeonkim2.github.io/assets/121271236/d036ba5c-ae46-4bb7-95f5-c74cdaccb23f)

```

- A_r1에 댓글을 다는 거야 (대댓글). 그러면 대댓글의 원글은 A_r1이 되니까, boardSequence=2+'1'=3, boardLevel=1+'1'=2이야

- 그럼 이번에는 A_r2에 댓글을 달아보자. 원글은 A_r2니까, boardSequence=1+'1'=2,boardLevel=1+'1'=2 야

- 근데 원글(A_r2)의 boardSequence(1)보다 큰 boardSequence들이 있네? 그러면 boardSequence+1 해주자

- 어떤 조건에서? boardSequence > 1 인 것들에 대해.

```
![image](https://github.com/taeyeonkim2/taeyeonkim2.github.io/assets/121271236/b6b5475b-d5e0-416b-94ba-4d4b5506ac45)

```

이 상황을 일반화 해보자

-


