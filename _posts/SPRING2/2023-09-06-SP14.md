---
layout: post
title: SPRING 14
categories: SPRING2
tags: [taeyeon]
---


## 게시판에 검색기능 구현하기

list.jsp에 페이징처리 윗부분에 검색 메뉴를 넣을 거야 

-bootstrap inline form 을 이용해서 가공해보자

```1=list.jsp
<!-- 검색 메뉴 -->
				<div style="text-align: center;"> //중간으로 보내기 위해 
				<form class="form-inline" action="${cpath}/board/list" method="post">
				  <div class="form-group"> 
				   <select name="type" class="form-control"> //option의 value가 type이라는 파라메타로 넘어감
				    <option value="writer">이름</option>
				    <option value="title">제목</option>
				    <option value="content">내용</option>
				   </select>
				  </div>
				  <div class="form-group">
				    <input type=text class="form-control" id="keyword" name="keyword"> 
				  </div>
				  <button type="submit" class="btn btn-success">검색</button>
				</form>
				</div>
```

## ㅁㄲ

list.jsp에서 검색을 누르면 컨트롤러의 list로 넘어가는데 파라메타로 type과 keyword가 넘어가는데

얘네를 어디에 저장해줘야할까? Criteria에 해주자 (Criteria에 변수 선언하자)

우리는 list페이지에 이제 type과 keyword값도 넘겨줘야해

상황은 4가지야 아무것도 검색하지 않기/제목 입력하고 검색/내용입력하고 검색/ 이름 입력하고 검색

이 모든 상황을 고려해서 sql쿼리문을 써서 데이터를 불러와야 해

sql쿼리문

```2=BoardMapper.xml
<sql id="search">
	 <if test="type=='writer'">
	 	where writer like concat('%',#{keyword},'%');
	 </if>
	 <if test="type=='title'">
	 	where title like concat('%',#{keyword},'%');
	 </if>
	 <if test="type=='content'">
	 	where content like concat('%',#{keyword},'%');
	 </if>
	</sql>
	
	<select id="getList" resultType="kr.bit.entity.Board" parameterType="kr.bit.entity.Criteria">
		select * from tblBoard 
		<include refid="search"/>
		order by boardGroup desc, boardSequence asc 
		limit #{pageStart},#{perPageNum}
	</select>
...
  <select id="totalCount" resultType="int" parameterType="kr.bit.entity.Criteria">
		select count(*) from tblBoard
		<include refid="search"></include>
	</select>

```
