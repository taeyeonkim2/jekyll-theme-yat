---
layout: post
title: SPRING 07
categories: SPRING2
tags: [taeyeon]
---

## 답글(Reply) 저장 및 불러오기 구현

replyProcess를 구현해보자

1. 부모글의 정보를 가져오자 boardGroup을 알아야 겠지? 

- Board parent=boardMapper.read(vo.getIdx);

2. 부모글의 boardGroup을 답글(넘어온 vo)에 담자

- vo.setBoardGroup(parent.getBoardGroup());

3. 답글의 boardSequence와 boardLevel을 담자

답글(vo)에 담은 값들을 insert하기 전에 동일한 boardGroup에 속한 답글 중에서

부모의 boardSequence보다 큰 값들은 모두 +1씩 업데이트 해줘야해

4.업데이트해주기 위한 메서드를 BoardMapper에 만들고 xml에 구현

5.이제 새로만들어진 답글을 insert하자 해당 메서드를 BoardMapper에 만들고 구현

6.리스트를 가져올 때 정렬해서 가져와야 겠지? boardSequence asc 추가해주자


## 답글의 순서 및 들여쓰기 구현

boardLevel에 따라 들여쓰기를 구현할거야

1.list.jsp에서 title을 보여주기전에 들여쓰기를 해주자

-boardSequnce가 0보다크다면 ~, 0이라면 ~


게시글을 삭제하는 경우를 2가지로 나눌 수 있어.

첫번째는 댓글이 있을 때 삭제를 못하게 하는 방법

두번째는 원글을 삭제하면 삭제하는 게 아니라, Available 값을 0으로 바꿔서 삭제된 게시물로 만드는 방법


## 답글의 삭제하기 구현

게시물을 삭제하면 Available을 0으로 만들고, 0이라면 삭제된 '게시물입니다' 라고 보이게 할거야

기존의 delete를 update로 바꾸면 되겠지?

1. mapper.xml의 id="delete" 쿼리문 변경

- update tblBoard set boardAvailable=0 where idx=#{idx}

2. list.jsp에서 제목을 보여주는 곳에 boardAvailable==0 일 때와 boardAvailable==1 일 때 나누기

3. 삭제된 게시물을 클릭했을 때 링크를 타면 안되고, 모달이나 알럿으로 삭제된 게시물입니다 를 띄워주자

-javascript:goMsg()
















