---
layout: post
title: SPRING 13
categories: SPRING2
tags: [taeyeon]
---

## 수정과 삭제후 페이지 번호 유지하기

지금은 목록을 눌렀을 때 돌아가는 것만 했는데, modify.jsp에서 돌아갈 때도 페이지를 유지하고 싶어

그러면 modify.jsp에도 page, perPageNum도 넘겨줘야겠지?

컨트롤러의 modify에서 @ModelAttribute로 cri를 바인딩해주자

지금 modify.jsp는 onclick으로 걸려있는데 이전의 get.jsp처럼 만들어 보자!

- 기존의 폼은 지우고 하단에 폼을 만들어주자 id="frm" method="post" 

- 수정 버튼의 submit도 button으로 바꿔줘야 겠지? 그리고 onclick을 다 날려주자

- onclick을 지운 버튼에 data-btn="modify" 이런 식으로 바꿔주자

```1=modify.jsp
$(document).ready(function(){
  		$("button").on("click",function(e){
  			var formData=$("#frm");
  			var btn=$(this).data("btn");
  			if(btn=='modify'){
  				formData.attr("action","${cpath}/board/modify");
  			}else if(btn=='remove'){
  				formData.attr("action","${cpath}/board/remove");
  				formData.attr("method","get");
  			}else if(btn=='list'){
  				formData.find("#idx").remove();
  				formData.attr("action","${cpath}/board/list");
  			}
  			formData.submit();
  		})
  	});
```

그런데 생각해보니까 modify (post)는 제목, 내용도 끌고 가야되잖아? 그냥 다시 폼을 전체로 걸어주자

그리고 아까 만든 하단 폼의 hidden중에 idx는 이제 필요없어졌어 왜냐? 이미 폼안에 존재하거든

remove나 list는 굳이 보낼 필요없는 값들은 formData.find("#idx").remove();이런식으로 삭제해주자

이제 post방식의 modify를 받는 컨트롤러의 메서드로 가보자

얘도 Criteria cri로 받아주고, 그런데 얘는 리다이렉트로 보낼거야 그러면 객체바인딩이 의미없잖아

redirectAttributes를 이용하자! page와 perPageNum을 넘겨주자

remove를 받아주는 애도 동일하게 해주자











