---
layout: post
title: SPRING MVC02 - 2
categories: example
tags: [plantuml]
---


## 다중 파일 업로드 구현(UI)

1.api 먼저 다운 받자 -> servlet-context.xml에 업로드를 위한 bean 

```1=java
<!-- 다중 업로드 API -->
	<beans:bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
		<beans:property name="maxUploadSize" value="52428800"/> //업로드 가능한 파일의 최대 크기
		<beans:property name="maxInMemorySize" value="1000000"/> //업로드 전에 메모리에 보관할 최대 바이트 크기
		<beans:property name="defaultEncoding" value="utf-8"/>
	</beans:bean>
```

2.업로드를 위한 view를 하나 만들 거야. views에 uploadForm.jsp 생성 + 부트 스트랩 설정

```1=java
<script type="text/javascript">
var cnt=1;
	function file_add() {
		$("#d_file").append("<br>"+"<input type='file' name='file"+cnt+"'/>");
		cnt++;
	} //파일이 추가될 때 마다 file1 -> file2 -> file3 이런식으로 name="d_file"에 저장하겠다.
</script>
</head>
<body>
<div class="container">
  <h2>다중 파일 업로드</h2>
  <div class="panel panel-default">
    <div class="panel-heading">스프링을 이용한 다중 파일 업로드 구현</div>
    <div class="panel-body">
    	//폼 시작
	  <form class="form-horizontal" action="<c:url value='/upload.do'/>" enctype="multipart/form-data" method="post">
    //upload.do 에 parameter로 name="id" "name" "d_file" 을 넘겨 
	  <div class="form-group">
	    <label class="control-label col-sm-2" for="id">아이디:</label>
	    <div class="col-sm-10">
	      <input type="text" class="form-control" id="id" name="id" placeholder="Enter id" style="width : 30%">
	    </div>
	  </div>
	  <div class="form-group">
	    <label class="control-label col-sm-2" for="name">이름:</label>
	    <div class="col-sm-10">
	      <input type="password" class="form-control" id="name" name="name" placeholder="Enter name" style="width : 30%">
	    </div>
	  </div>
	  <div class="form-group">
	    <label class="control-label col-sm-2" for="">파일 추가:</label>
	    <div class="col-sm-10">
	      <input type="button" value="파일 추가" onclick="file_add()"><br> //파일추가시 file_add 메서드로 가
	      <div id="d_file"></div>
	    </div>
	  </div>
	  <div class="form-group">
	    <div class="col-sm-offset-2 col-sm-10">
	      <button type="submit" class="btn btn-default">업로드</button>   //버튼 클릭스 upload.do로 가
	    </div>
	  </div>
	</form>
    	//폼끝
    </div>
    <div class="panel-footer">화이팅</div>
  </div>
</div>
</body>
```

3.MemberController에 메서드 추가




