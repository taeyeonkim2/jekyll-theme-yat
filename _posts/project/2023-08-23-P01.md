---
layout: post
title: 지금까지 배운 것으로 쇼핑몰 만들기
categories: MyProject(SPRING)
---

## 기본 설정
1.Spring Legacy Project 생성(name:MyProject / package : kr.taeyeon.controller)

2.패키지 생성(kr.taeyeon.entity / kr.taeyeon.mapper)

3.MainController.java / BoardRestController.java / board.sql / main.jsp / BoardMapper 인터페이스 / BoardMapper.xml 생성 

4.pom.xml 설정

```1=pom.xml
<groupId>org.apache.maven.plugins</groupId>
 source / target 버전을 1.8로 설정 (update)
...
    <!-- Mysql과 이클립스 연동--!>
    <dependency>
			<groupId>mysql</groupId>
			<artifactId>mysql-connector-java</artifactId>
			<version>8.0.16</version>
		</dependency>
		<!-- 스프링과 자바 연동--!>
		<dependency>
			<groupId>org.springframework</groupId>
			<artifactId>spring-jdbc</artifactId>
			<version>5.0.2.RELEASE</version>
		</dependency>
		<!-- db 연결및 커넥션풀 생성을 위한 Hikari API --!>
		<dependency>
			<groupId>com.zaxxer</groupId>
			<artifactId>HikariCP</artifactId>
			<version>3.4.1</version>
		</dependency>
		<!-- 마이바티스 연동--!>
		<dependency>
			<groupId>org.mybatis</groupId>
			<artifactId>mybatis</artifactId>
			<version>3.4.6</version>
		</dependency>
		<!-- 마이바티스 & 스프링 연결 --!>
		<dependency>
			<groupId>org.mybatis</groupId>
			<artifactId>mybatis-spring</artifactId>
			<version>1.3.2</version>
		</dependency>
    <!-- RestController 사용을 위한 --!>
    <dependency>
			<groupId>com.fasterxml.jackson.core</groupId>
			<artifactId>jackson-databind</artifactId>
			<version>2.9.8</version>
		</dependency>
```

5.web-context.xml에 db연결을 위한 설정
```2=web-context.xml

  <bean id="hikariConfig" class="com.zaxxer.hikari.HikariConfig">
		<property name="driverClassName" value="com.mysql.cj.jdbc.Driver"/>
		<property name="jdbcUrl" value="jdbc:mysql://localhost:3306/com?serverTimezone=UTC"/>
		<property name="username" value="com"/>
		<property name="password" value="com01"/>
	</bean>
	
	<bean id="dataSource" class="com.zaxxer.hikari.HikariDataSource" 
	                                                destroy-method="close">
      <constructor-arg ref="hikariConfig" />
    </bean>
    
    <mybatis-spring:scan base-package="kr.taeyeon.mapper"/>
    
    <bean class="org.mybatis.spring.SqlSessionFactoryBean">
       <property name="dataSource" ref="dataSource" />
    </bean>
```
## 게시판 만들기

<h3>회원 리뷰 (게시판 형식)</h3>
-번호, 제목, 코멘트, 작성자 , 작성일, 아이템명(현재는 작성자가 입력, 추후에 아이템의 정보를 끌어와서 자동으로 등록되도록)<br>

1.테이블및 VO 구성<br>
-테이블은 게시판용으로 한 개만 우선 만들자. 추후에는 아이템 테이블에서 정보를 끌어올 거야<br>
-번호(idx),제목(title),코멘트(cmt),작성자(writer),작성일(regdate),아이템명(itemName),조회수(count)<br>
-테이블 생성 후, Board 클래스 생성후 생성자, getter&setter 메서드 구현

```3=board.sql
create table reviewtbl(
	idx int not null auto_increment,
	title varchar(100) not null,
	cmt varchar(2000) not null,
	writer varchar(30) not null,
	regdate datetime default now(),
	itemName varchar(30) not null,
	count int default 0,
	primary key(idx)
);
```

2.리뷰 게시판을 구성해보자 (main.jsp)<br>

-RestController를 사용해 보자.<br>
-ajax로 전체 리뷰 리스트를 뿌려줄거야<br>
-ajax로 요청을 보낼 url : "review/all" <br>
-BoardRestController에 @RequestMapping("/review) 걸어주자 <br>
-getList메서드 만들고, BoardMapper 인터페이스와 BoardMapper.xml 적기<br>

3.리뷰 등록 만들기<br>
-main.jsp 에서 리뷰 등록 버튼을 누르면, form의 데이터들은 serialize해서 받아오자<br>
-받은 데이터를 ajax로 쏠 거야 (url : "review/new" )<br>
-success시 리뷰 게시판 띄우기 & 리뷰쓰기폼 없어지도록<br>

4.리뷰의 제목을 누르면 내용을 볼 수 있도록 하자<br>
-내용을 아래로 뜨도록하고, 다시 누르면 내용은 안보이고 조회수는 1증가하도록 만들자<br>
-제목을 누르면, idx를 파라메타로 보내서 ajax로 컨텐츠를 끌어올 거야<br>
-그리고 그 데이터에 담긴 cmt값을 뿌려줄거야<br>
-Controller / Mapper인터페이스 / Mapper.xml 구현<br>


