---
layout: post
title: AOP가 뭘까
categories: 스프링 조금조금
tags: [taeyeon]
---

뉴렉처 강의 좋다.

## DI ?

맨날 스프링하면 디펜던시 인젝션. 의존성 주입. 제어의 역전 이러는데 너무 헷갈렸다

그 목적만 파악하자. 결합도를 낮추는 것

결합도를 낮춰야하는 이유? 소스코드 변경시 수정할 부분을 최소화하기 위해

그럼 Dependency Injection 말 자체를 한 번 생각해보자

디펜던시 -> 의존성 -> 의존성? 클래스 A는 인터페이스 B를 상속하는 클래스 B1의 인스턴스를 사용한다.

클래스 B의 인스턴스를 사용하기 위해 B b = new B1(); 로 생성해야겠지?

근데 이번에 같은 기능인데 좀 더 성능이 좋은 B2의 인스턴스를 사용하고 싶어

그러면 B b = new B2();로 수정을 해야겠네??이 정도는 수정할 수 있지

근데 실무에서 수정해야할 것이 저거 하나일까? 

그래서 아예 클래스 A에서 B1 이나 B2같은 구현 클래스의 인스턴스를 생성하는 것이 아니라,

누군가에 의해 B1, B2의 인스턴스를 파라미터로 받는거야

B b = new B1(); -> public A(B b) 이렇게 하면

생성자로 받기만 하면돼 b가 B1의 인스턴스인지 B2의 인스턴스인지 상관 없이!

이런 과정을 Dependency Injection이라고 불러

## IoC

스프링은 위와 같이 객체를 생성하고, 객체 간의 관계를 만들어주는 역할을 해

즉, 만들고 조립해주는 역할을 한다고 생각하면 돼.

그럼 어떤 객체를 만들고, 어떠한 관계를 만들어야할 지는 우리가 설정해줘야지.

이러한 주문서를 우리는 xml 파일, 어노테이션으로 작성할거야

컨테이너, 진짜 예전부터 항상 궁금했다. 컨테이너가 뭘까 도대체

우리가 적은 주문서대로 객체를 생성해서 그 객체들을 담아 놓는 곳을 컨테이너라고 생각하면돼

그럼 IoC 컨테이너는 뭘까?

그냥 객체만 생성되어서 담겨있으면 Dependency컨테이너라고 불러도 되잖아

근데 IoC컨테이너는 조립까지 해서 담아준다는 뜻으로 이해하면돼

큰 덩어리에 작은 것들을 조립해나가는 것이 아니라, 작은 부품을 먼저 조립하고,

그 과정에서 부품이 커지는, 즉 순서가 역전되었다는 말이지









## AOP ? 

보통 사용자의 관점에서 프로그래밍을 해왔는데, 이걸 객체 지향 프로그래밍이라고 불러.

사용자의 관점에서 중요한 주요로직이 아닌

로그 처리, 보안 처리, 트랜잭션 처리와 같은 부가적인 업무도 필요해졌어

이러한 처리들은 주요 로직의 맨앞, 맨뒤에 들어가거든?

그러면 그냥 소스, 메서드의 맨 앞, 맨 뒤에 갖다 적으면 되잖아

소스를 모르면? 로그처리를 넣었다 뺐다 자주해야한다면?

그걸 가능하게 해주는 방법론이 AOP야

소스가 없는데 어떻게 로직에 코드를 삽입할 수 있을까? '프록시'를 사용하면돼

## 스프링으로 구현해보자

용어 먼저 정리를 해볼게

주요 로직(사용자 관점) : Core-Concern

부가 로직(개발자, 운영자 관점) : Cross-Cutting-Concern 이라고 부를거야

Cross-Cutting-Concern은 주요 로직 시작전, 종료 후, 시작 전과 후에 실행할 지

크게 3가지로 나뉘지. 거기에 예외처리까지 총 4가지로 보면돼

내가 필요한 상황에 따라서 각각의 인터페이스를 구현하면 끝이야!

Before(시작전), Afterreturning(종료후), Around(시작 전후), Afterthrowing(예외처리)




