---
layout: post
title: 네트워크 장비에 대해
categories: NETWORK
tags: taeyeonkim
---

## 랜카드?

랜카드는 유저의 데이터를 케이블에 실어서 허브나 스위치, 라우터 등으로 전달해주고,

자신에게 온 데이터를 CPU에게 전달해주는 역할을 해

쉽게 말해서 랜에 접속하기위한 카드처럼 생긴 무언가야.

## 허브

허브는 직사각형의 상자에 구멍이 뚫려있는 모양으로 되어있어.

이 구멍이 몇개 있느냐에 따라 몇포트 허브다!라고 부르지.

즉, 이 구멍의 숫자가 몇 대의 장비를 연결할 수 있는 지 결정해주는 키야.

허브는 무슨 일을 할까? 멀티포트와 리피터야

멀티포트는 말 그대로 포트가 많이 붙어있다는 뜻이고,

리피터는 들어온 데이터를 그대로 재전송한다는 뜻이야.

이게 무슨 말일까? 한 포트로 들어온 데이터를 나머지 모든 포트로 뿌려준다는 뜻이지

리피터를 좀 더 알아보자.

우리가 주로 사용하는 UTP케이블은 최대 전송거리가 100m인데,

100m이상 떨어져 있는 장비는 어떻게 해야할까?

이 때 중간에서 리피터의 역할이 중요해

즉, 중간에 리피터를 두고 두 장비를 케이블을 통해서 리피터로 연결하면 통신이 가능해

이러한 리피터의 역할을 허브가 하고 있지.

허브도 이더넷 허브이기때문에 CSMA/CD의 적용을 받아. 

즉, 하나의 PC가 허브에 데이터를 보내고 있을 때 다른 PC가 데이터를 보내려고하면 Collision이 발생하잖아

이렇게 동일한 허브에 연결되어있는 모든 PC들은 콜리전 도메인에있다고 말해

## 허브의 한계 그리고 스위치

이렇게 콜리전 도메인에 있는 PC들은 콜리전 발생시 모두 영향을 받는 다는 것이 허브의 한계야

즉, 계속 콜리전 도메인이 커지면 통신의 속도가 점점 더 떨어지겠지..

이러한 문제를 해결해줄 장비가 바로 브리지, 스위치야.

스위치는 콜리전 도메인을 나눠주는 역할을 해.

원래 스위치가 나오기 전까지 이 역할을 브릿지가 해줬는데, 이젠 스위치가 그 역할을 맡아서하고 있어

스위치가 어떤 건지 예시로 들으면 이해하기 쉬워

1번포트에 연결된 PC와 2번포트에 연결된 PC가 통신 중일 때, 기존의 허브였다면

3번,4번,5번...나머지 포트들은 그냥 가만히 기다려야했잖아?

근데 스위치를 사용하면 콜리전 도메인을 나눔으로써 1,2번이 통신할 때 3,4번끼리 통신이 가능해

## 브리지

브리지는 허브로 만들어진 콜리전 도메인을 반으로 나누고 그 사이에 다리를 놓는 거야

이해안가지? 예시로 들어보자

콜리전 도메인을 남과북으로 나누었고, 남과북은 브리지로 연결하는거야

그러면 이제 남단은 남단끼리, 북단은 북단끼리 통신이 가능해

남단의 PC와 북단의 PC가 통신하기 위해서 그 때 브리지를 통하면 되는 거고.

## 브리지와 스위치의 기능

1. Learning 배운다

뭘 배워? 출발지의 맥 주소를.

브리지나 스위치는 자신의 포트에 연결된 A라는 PC가 통신을 위해 프레임을 보낼 때

A의 맥 주소("출발지 주소")를 읽어서 맥 주소 테이블 (브리지 테이블)에 저장해둬

- 브리지로 두 영역(E0 / E1)으로 나누었다고 생각해보자

- 각 영역에는 A,B / Y,Z PC가 있다

- 브리지 테이블은 E0;A의 맥주소,E0:B의 맥주소 / E1:C의 맥주소,E1:D의 맥주소 이런 식으로 저장을 해

2. Flooding 뿌린다

들어온 포트를 제외한 나머지에게 모두 뿌린다는 뜻이야

엥? 브리지는 브리지 테이블을 참조해서 프레임이 다리를 못건너가게 한다며?

목적지의 맥 주소가 브리지 테이블에 없으면, 목적지의 맥 주소와 통신한 적이 없다면

어떻게하게? 음.. 다 뿌려야지그럼

3. Forwarding 건넨다

브리지 테이블에 목적지의 맥 주소를 가지고 있고, 목적지가 출발지의 맥 주소와 다른 영역에 존재할 때.

목적지가 다리를 건너에 있다는 것을 알고 있을 때 해당하는 포트쪽으로만 뿌려주는 것!

4. Filtering 브리지를 못넘어가게 막는다

출발지와 목적지가 같은 영역이란 걸 알고 있을 때, 다리를 막는 것!

5. Aging

어느 정도(디폴트 5분) 시간이 지나고 나면 배운(learning했던) 맥 주소를 브리지 테이블에서 삭제하는 것!

## 브리지와 스위치의 차이점

스위치는 Cut-through / Store-and-forwarding, 브리지는 오로지 Store-and-forwarding

1. 스토어 앤 포워드 ?

스위치나 브리지가 우선 들어오는 프레임을 다 받아들이고, 

에러 여부, 출발지 주소, 목적지 주소를 파악해서 처리해주는 방식이야

이 때, 에러가 나면 프레임을 버리고 재전송을 요구하지

2. 컷 스루?

스위치가 들어오는 프레임의 목적지 주소만 보고(처음 48비트) 전송 처리를 시작하는 방식이야

스토어 앤 포워드보다 당연히 빠르겠지? 그대신 에러 복구 능력은 떨어지지.

3. 프래그먼트-프리

위 두 방식의 장점을 합친 것. 전체 프레임을 다 보는게 아니라 처음 512비트만 보고 전송하는 방식






